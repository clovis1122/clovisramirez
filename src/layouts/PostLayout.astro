---
import BaseLayout from "./BaseLayout.astro";
import Bio from "../components/Bio.astro";
import { formatDate } from "../utils/dates";

const { title, description, date, prev, next } = Astro.props;
const formattedDate = date ? formatDate(date) : "";
---
<BaseLayout title={title} description={description}>
  <article class="post">
    <header>
      <h1>{title}</h1>
      {formattedDate && <p class="date">{formattedDate}</p>}
    </header>
    <div class="prose">
      <slot />
    </div>
  </article>
  <div class="post-footer">
    <hr />
    <Bio />
    <nav class="post-nav">
      {prev && (
        <a href={`/posts/${prev.slug}/`}>← {prev.data.title}</a>
      )}
      {next && (
        <a class="next" href={`/posts/${next.slug}/`}>{next.data.title} →</a>
      )}
    </nav>
  </div>
</BaseLayout>

<style>
  .date {
    margin-bottom: 28px;
  }

  .prose :global(p) {
    line-height: 1.7;
    margin-bottom: 30px;
  }

  .prose :global(h2) {
    margin-top: 60px;
    margin-bottom: 14px;
  }

  .prose :global(h3) {
    margin-top: 60px;
    margin-bottom: 12px;
  }

  .prose :global(h4) {
    margin-top: 60px;
    margin-bottom: 10px;
  }

  .prose :global(img) {
    max-width: 100%;
  }

  .prose :global(hr) {
    border: none;
    border-top: 1px solid rgb(140 142 150 / 0.5);
    margin: 64px 0 44px;
  }

  .post-footer hr {
    border: none;
    border-top: 1px solid rgb(140 142 150 / 0.5);
    margin: 56px 0 36px;
  }

  .post-nav {
    display: flex;
    margin-top: 20px;
    gap: 16px;
    flex-wrap: wrap;
  }

  .post-nav a {
    font-family: "Montserrat", sans-serif;
    font-weight: 800;
    font-size: 14px;
  }

  .post-nav .next {
    margin-left: auto;
  }

  @media (max-width: 768px) {
    .prose :global(p) {
      line-height: 1.65;
    }

    .prose :global(h2) {
      margin-top: 60px;
      margin-bottom: 12px;
    }

    .prose :global(h3) {
      margin-top: 60px;
      margin-bottom: 10px;
    }

    .prose :global(hr) {
      margin: 52px 0 36px;
    }

    .post-footer hr {
      margin: 48px 0 30px;
    }
  }
</style>
